services:
  app:
    build: .
    ports:
      - "${PORT:-3110}:3110"
    environment:
      - NODE_ENV=production
      - DOMAIN=${DOMAIN:-localhost}
      - NEXT_PUBLIC_SUPABASE_URL
      - NEXT_PUBLIC_SUPABASE_ANON_KEY
      - SUPABASE_SERVICE_ROLE_KEY
      - ANTHROPIC_API_KEY
      - ADMIN_API_KEY
      - DATABASE_URL
    networks:
      - default
      - supabase
    restart: unless-stopped

networks:
  supabase:
    name: enshittification-clock-supabase-e9ew2d
    external: true
